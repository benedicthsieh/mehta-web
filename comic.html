<html>
<head>
  <title>
    Mehta
  </title>
  <link rel="stylesheet" type="text/css" href="style.css">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <link rel="stylesheet" type="text/css" href="comic.css">
  <script>
    var page;  // starts unset
    var maxPage = 13;
    var minPage = 1;
    // http://stackoverflow.com/questions/831030/how-to-get-get-request-parameters-in-javascript
    function get(name) {
      if(name=(new RegExp('[#&]'+encodeURIComponent(name)+'=([^#]*)')).
        exec(location.hash))
      return decodeURIComponent(name[1]);
    }
    function setup() {
      var previousButtons = document.getElementsByClassName("previous");
      for (var i = 0; i < previousButtons.length; i++) {
        previousButtons.item(i).onclick = previousPage;
      }
      var nextButtons = document.getElementsByClassName("next");
      for (var i = 0; i < nextButtons.length; i++) {
        nextButtons.item(i).onclick = nextPage;
      }
      loadFromUrl();
    }
    function loadFromUrl() {
      var urlPage = parseInt(get('p'), 10);
      if (!urlPage) {
        urlPage = 1;
      }
      if (page == urlPage) {
        return;
      }
      page = urlPage;
      showCurrentPage();
    }
    function updateUrl() {
      location.hash = "p=" + page;
    }
    function showCurrentPage() {
      var img = document.getElementById("shown-panel");
      var paddedPage = ("0" + page).substr(-2,2);
      img.src = "./pages/pg" + paddedPage + ".jpg";
    }
    function nextPage() {
      if (page + 1 <= maxPage) {
        page++;
        updateUrl();
        showCurrentPage();
      }
    }
    function previousPage() {
      if (page - 1 >= minPage) {
        page--;
        updateUrl();
        showCurrentPage();
      }
    }
    window.onload = setup;
    window.onpopstate = loadFromUrl;
  </script>
</head>
<body>
  <div id="title-bar">
    <span class="big-title">
      <a href="index.html">mehta</a></span>
    <span class="small-bar">
      <b><a class="navbar-link" href="comic.html">comic</a></b>
      <a class="navbar-link" href="blog.html">blog</a>
      <a class="navbar-link" href="">kickstarter <img class="offsite" src="images/offsite.svg.png"></a>
    </span>
  </div>
  <div id = "top-button-row">
    <a class = "nav-button previous">
      <div class="round-button"><div class="round-button-circle">
        <div class="button-spacer-left">&lt;</div>
      </div></div></a>
    <a class = "nav-button next">
      <div class="round-button"><div class="round-button-circle">
        <div class="button-spacer-right">&gt;</div>
      </div></div></a>
  </div>
  <div id = "image-container">
    <img id = "shown-panel" src="./pages/panel1.png">
  </div>
  <div id = "bottom-button-row">
    <a class = "nav-button previous">
      <div class="round-button"><div class="round-button-circle">
        <div class="button-spacer-left">&lt;</div>
      </div></div></a>
    <a class = "nav-button next">
      <div class="round-button"><div class="round-button-circle">
        <div class="button-spacer-right">&gt;</div>
    </div></div></a>
  </div>
</body>
</html>